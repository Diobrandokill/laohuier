(function(t){function e(e){for(var r,a,s=e[0],c=e[1],u=e[2],m=0,d=[];m<s.length;m++)a=s[m],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"022e":function(t,e,n){},"0361":function(t,e,n){},"065b":function(t,e,n){},"0685":function(t,e,n){"use strict";var r=n("6a14"),i=n.n(r);i.a},"0eb0":function(t,e,n){},1:function(t,e){},1338:function(t,e,n){"use strict";var r=n("26ac"),i=n.n(r);i.a},"20f1":function(t,e,n){"use strict";var r=n("b8c0"),i=n.n(r);i.a},2172:function(t,e,n){},"23f9":function(t,e,n){"use strict";var r=n("022e"),i=n.n(r);i.a},2583:function(t,e,n){},"26ac":function(t,e,n){},"325c":function(t,e,n){"use strict";var r=n("8c34"),i=n.n(r);i.a},3447:function(t,e,n){"use strict";var r=n("8d7e"),i=n.n(r);i.a},"3f18":function(t,e,n){},"3f70":function(t,e,n){},"44e8":function(t,e,n){"use strict";var r=n("b250"),i=n.n(r);i.a},5113:function(t,e,n){},"548f":function(t,e,n){"use strict";var r=n("f644"),i=n.n(r);i.a},"54df":function(t,e,n){"use strict";var r=n("9d34"),i=n.n(r);i.a},5613:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("96cf");var r=n("3b8d"),i=(n("cadf"),n("551c"),n("f751"),n("097d"),n("a026")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("lg-preview")],1)},a=[],s={data:function(){return{bottomNav:"recents"}},mounted:function(){},methods:{}},c=s,u=(n("e936"),n("2877")),l=Object(u["a"])(c,o,a,!1,null,null,null),m=l.exports,d=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("div",{},[n("mu-appbar",[n("mu-button",{attrs:{slot:"left",icon:""},slot:"left"}),n("div",{staticClass:"title"},[t._v("唠会儿！")]),n("mu-button",{attrs:{slot:"right",icon:""},slot:"right"},[n("mu-icon",{attrs:{value:"expand_more"}})],1)],1)],1),n("div",{staticClass:"chat-list"},[n("mu-paper",[n("mu-list",[n("mu-sub-header",[t._v("最近聊天记录")]),n("mu-list-item",{attrs:{avatar:"",button:"",ripple:!0},on:{click:function(e){return t.chatwindow("room1")}}},[n("mu-list-item-action",[n("div",{staticClass:"avatar"},[0!==t.unRead1?n("span",{staticClass:"tip"},[t._v(t._s(t.unRead1>99?"99+":t.unRead1))]):t._e(),n("Avatar",{attrs:{src:t.house1,size:"small"}})],1)]),n("mu-list-item-content",[n("mu-list-item-title",[t._v("公共聊天室")]),n("mu-list-item-sub-title",[t._v(t._s(t.getTailMsg("room1")))])],1),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"chat_bubble"}})],1)],1)],1),n("mu-divider"),n("mu-list",[n("mu-sub-header",[t._v("好友")]),t._l(t.friendList,(function(e){return n("mu-list-item",{key:e._id,attrs:{avatar:"",button:"",ripple:!0},on:{click:function(n){return t.chatSingle(e.friendId._id,e.friendId.name)}}},[n("mu-list-item-action",[n("mu-avatar",{staticClass:"avatar"},[n("img",{attrs:{src:e.friendId.src}})])],1),n("mu-list-item-content",[n("mu-list-item-title",[t._v(t._s(e.friendId.name))]),n("mu-list-item-sub-title",[t._v(t._s(t.getSingleTailMsg(e.friendId._id)))])],1),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"chat_bubble"}})],1)],1)}))],2)],1)],1),n("Bottom")],1)},f=[],h=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),v=(n("2172"),n("5613"),window.document.body);function g(t){var e=document.createElement("div"),n=document.createElement("div");return e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.left="0",e.style.top="0",v.appendChild(e),e.appendChild(n),t=t||{},new Promise((function(r){return new i["a"]({el:n,data:{title:t.title||"",content:t.content||"",ok:t.ok||"确定",cancel:t.cancel||"取消"},methods:{submit:function(){v.removeChild(e),r("submit")},close:function(){v.removeChild(e),r("close")}},template:'\n      <div class="wind-alert">\n        <div class="wind-alert-bg"></div>\n        <div class="wind-alert-dialog animate-scale">\n          <div class="wind-alert-title">{{title}}</div>\n          <div class="wind-alert-content">{{content}}</div>\n          <div class="wind-confirm-btns" >\n            <div class="wind-confirm-btn" @click="submit">{{ok}}</div>\n            <div class="wind-confirm-btn" @click="close">{{cancel}}</div>\n          </div>\n        </div>\n      </div>\n    '})}))}var b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-bottom"},[n("mu-paper",[t.bottomNav?n("mu-bottom-nav",{attrs:{value:t.bottomNav}},[n("mu-bottom-nav-item",{attrs:{value:"#/",title:"主页",icon:"restore",to:"/"}}),n("mu-bottom-nav-item",{attrs:{value:"#/search",title:"搜索",icon:"search",to:"/search"}}),n("mu-bottom-nav-item",{attrs:{value:"#/home",title:"我的",icon:"location_on",to:"/home"}})],1):t._e()],1)],1)},w=[],O={components:{},data:function(){return{bottomNav:""}},computed:{},mounted:function(){var t=location.hash;this.bottomNav=t},methods:{}},y=O,j=(n("6094"),Object(u["a"])(y,b,w,!1,null,"60509e88",null)),k=j.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-avatar"},[n("img",{class:[t.avatarSzie,t.avatarType],attrs:{src:t.src,alt:""}})])},x=[],I={props:["size","type","src"],components:{},data:function(){var t="w-avatar-".concat(this.size||"normal"),e="w-avatar-".concat(this.type||"square");return{avatarSzie:t,avatarType:e}},computed:{},mounted:function(){},methods:{}},C=I,R=(n("6cb7"),Object(u["a"])(C,_,x,!1,null,null,null)),E=R.exports,P=n("2f62");n("28a5"),n("a481"),n("4917");function S(t,e){return t>e?"".concat(t,"-").concat(e):"".concat(e,"-").concat(t)}function $(t){return t.replace(/\s/g,"")}var L=function(){var t,e="",n="",r=navigator.userAgent,i="Unknown",o=r.match(/(ipod).*\s([\d_]+)/i),a=r.match(/(ipad).*\s([\d_]+)/i),s=r.match(/(iphone)\sos\s([\d_]+)/i),c=r.match(/(Android\s\S*)(\szh-cn;|\szh-CN;)?\s?((\S*)\s(\S*\s\S*)|(\w*)-(\w*)|(\S*)\s(\S*))\sBuild/i),u=(t=r.match(/(MSIE [\d.]+)/))||(t=r.match(/(Firefox\/[\d.]+)/))||(t=r.match(/(Chrome\/[\d.]+)/))||(t=r.match(/(Opera.[\d.]+)/))||(t=r.match(/(Version\/[\d.]+).*Safari/))?t[1]:"Unknown";i=c&&c.length>2?c[1].replace(";","")+","+c[3]:s?"iPhone,iOS "+s[2].replace(/_/g,"."):a?"iPad,iOS "+a[2].replace(/_/g,"."):o?"iPod,iOS "+o[2].replace(/_/g,"."):"browser,"+u,i=$(i);var l=i.split(",");return e=l[0],n=l[1],{browser:e,os:n,ua:r}}(),D=L,U="//s3.qiufengh.com/avatar/robots.jpg",M="大白",N="https://s3.qiufengh.com/images/bce5b10ae530f530.png?imageView2/2/w/120/h/120",V="https://s3.qiufengh.com/images/2016061316082590301.jpg?imageView2/2/w/120/h/120",T="//s3.qiufengh.com/avatar/hoster.jpg",B="主人",A=n("8055"),H=n.n(A),z=-1!==window.location.href.indexOf("debug")||!1,G={server:z?"http://127.0.0.1:9090/":"http://182.92.70.188:9090/"},F=H.a.connect(G.server),q=F;function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X={name:"Loan",data:function(){return{house1:N,house2:V,robot:U}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.userInfo.id&&this.$store.dispatch("postListFriend",{selfId:this.userInfo.id});case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getSingleTailMsg:function(t){var e=this.userInfo.id,n=S(e,t);return this.getTailMsg(n)},getTailMsg:function(t){var e=this.roomdetail[t]||[];if(0===e.length)return"暂无消息";var n=e[e.length-1],r=n.username,i=n.msg,o=n.img;if(o)return"".concat(r,"说: [图片]");var a="".concat(r,"说: ").concat(i);return a.length>15?"".concat(r,"说: ").concat(i.slice(0,7),"..."):a},chatwindow:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.userInfo.token){t.next=6;break}return t.next=3,g({title:"提示",content:"聊天请先登录，但是你可以查看聊天记录哦~"});case 3:return n=t.sent,"submit"===n&&this.$router.push({path:"login"}),t.abrupt("return");case 6:this.$router.push({path:"/chat",query:{roomId:e,type:"group"}});case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),chatSingle:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=this.userInfo.id,i=S(r,e),this.$router.push({path:"/chat",query:{roomId:i,from:r,to:e,type:"single",friendName:n}});case 3:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),chatRobot:function(){this.$router.push({path:"/robot"})}},computed:J({},Object(P["c"])({roomdetail:function(t){return t.roomdetail},username:function(t){return t.userInfo.userid},userid:function(t){return t.userInfo.id},src:function(t){return t.userInfo.src},isLogin:function(t){return t.isLogin},unRead1:function(t){return t.unRead.room1},unRead2:function(t){return t.unRead.room2},userInfo:function(t){return t.userInfo},friendList:function(t){return t.friendList}})),components:{Bottom:k,Avatar:E}},Y=X,K=(n("c1c4"),Object(u["a"])(Y,p,f,!1,null,null,null)),Q=K.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[n("mu-appbar",{attrs:{color:"primary"}},[n("mu-button",{attrs:{slot:"left",icon:""},on:{click:t.goback},slot:"left"},[n("mu-icon",{attrs:{value:"chevron_left"}})],1),t._v("\n        大白客服\n        "),n("mu-button",{attrs:{slot:"right",icon:""},slot:"right"},[n("mu-icon",{attrs:{value:"expand_more"}})],1)],1)],1),n("div",{staticClass:"chat-inner"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ishow,expression:"ishow"}],staticClass:"message-list"},t._l(t.getRobotMsg,(function(e){return n("Message",{key:e.id,attrs:{"is-self":e.username===t.hoster,name:e.username,head:e.src,msg:e.msg,img:e.img,mytime:e.time}})})),1)]),n("div",{staticClass:"con-input"},[n("InputSumbit",{on:{sumbit:t.sendmessage}})],1)])])},tt=[],et=(n("6b54"),window.document.body);function nt(t){var e=document.createElement("div"),n=document.createElement("div");return e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.left="0",e.style.top="0",et.appendChild(e),e.appendChild(n),t=t||{},new Promise((function(r){return new i["a"]({el:n,data:{title:t.title||"提示",content:t.content||"",btn:t.btn||"确定",html:t.html||""},methods:{close:function(){et.removeChild(e),r(this)}},template:'\n      <div class="wind-alert">\n        <div class="wind-alert-bg"></div>\n        <div class="wind-alert-dialog animate-scale">\n          <div class="wind-alert-title">{{title}}</div>\n          <div v-if="content" class="wind-alert-content">{{content}}</div>\n          <div v-if="html" class="wind-alert-content" v-html="html"></div>\n          <div class="wind-alert-btn" @click="close">{{btn}}</div>\n        </div>\n      </div>\n    '})}))}var rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"msg",staticClass:"clear",class:[t.isSelf?"right":"left"]},[n("div",{staticClass:"name"},[t.mytime?n("span",[t._v(t._s(t.getdate))]):t._e(),t._v("   "+t._s(t.name)+"\n  ")]),n("div",{staticClass:"body"},[t.isSelf?n("div",{staticClass:"tip"},[n("Status",{attrs:{status:t.status},on:{error:t.handleRetry}})],1):t._e(),n("div",{staticClass:"item"},[n("Avatar",{directives:[{name:"flex-touch",rawName:"v-flex-touch",value:t.handleTouch,expression:"handleTouch"}],staticClass:"head-place",attrs:{size:"small",src:t.avatar},nativeOn:{click:function(e){return t.handleClick(e)}}}),t.img?n("div",[n("div",{staticClass:"img-wrapper"},[t.loading&&100!==t.loading?n("div",{staticClass:"img-bg"},[t._v(t._s(t.loading)+"%")]):t._e(),n("img",{directives:[{name:"imgSize",rawName:"v-imgSize",value:t.pic.src,expression:"pic.src"},{name:"preview",rawName:"v-preview",value:t.img,expression:"img"}],staticClass:"img",attrs:{width:t.pic.width,height:t.pic.height,alt:"","data-item":t.isLast&&"last","preview-title-enable":"true","preview-nav-enable":"true"}})])]):t._e(),t.msg?n("span",[n("span",{staticClass:"msg",domProps:{innerHTML:t._s(t.linkMsg)}})]):t._e()],1)])])},it=[],ot=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",["loading"===t.status?n("i",{staticClass:"icon iconfont icon-loading circle-loading"}):t._e(),"error"===t.status?n("i",{staticClass:"icon iconfont icon-error",on:{click:t.error}}):t._e()])}),at=[],st={props:["status"],components:{},data:function(){return{}},computed:{},methods:{error:function(){this.$emit("error")}}},ct=st,ut=(n("859d"),Object(u["a"])(ct,ot,at,!1,null,null,null)),lt=ut.exports;n("3b2b");function mt(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12===0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()},r={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+r[t.getDay()+""])),n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e}var dt=n("398b"),pt=200,ft=200,ht={components:{Avatar:E,Status:lt},props:["id","name","img","msg","head","mytime","is-self","container","isNeedScroll","firstNode","isLast","status","clientId","roomid","obj","loading"],computed:{getdate:function(){return mt(new Date(this.mytime),"yyyy-MM-dd HH:mm:ss")},linkMsg:function(){var t=Object(dt["a"])(this.msg);return t.replace(/(http:\/\/|https:\/\/)((\w|=|\?|\.|\/|&|-)+)/g,(function(t){var e=t;return'<a style="color: #b374ff" href="'.concat(Object(dt["b"])(e),'" target="_blank">').concat(Object(dt["b"])(e),"</a>")}))},avatar:function(){var t=this.head,e=/\.\/static\/img\/(\d+)\.jpg/,n=this.head.match(e);return n&&(t="//s3.qiufengh.com/avatar/".concat(n[1],".jpeg")),t.indexOf("?")>-1?"".concat(t,"&imageView2/2/w/120/h/120"):"".concat(t,"?imageView2/2/w/120/h/120")},pic:function(){var t=this.img,e=200,n=200,r=/width=([0-9]+)&height=([0-9]+)/.exec(t);if(r){var i=+r[1],o=+r[2],a=1;i*a>pt&&(a=pt/i),o*a>ft&&(a=ft/o),e=i*a,n=o*a}return t.indexOf("data:image")>-1?{src:t.split("?")[0],width:e,height:n}:t.indexOf("?")>-1?{src:"".concat(t,"&imageView2/2/w/360"),width:e,height:n}:{src:"".concat(t,"?imageView2/2/w/360"),width:e,height:n}}},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.msg.scrollIntoView()})),this.handleLoading()},watch:{status:function(t,e){"loading"===t&&this.handleLoading()}},methods:{handleLoading:function(){var t=this;setTimeout((function(){"loading"===t.status&&t.$store.commit("setRoomDetailStatus",{clientId:t.clientId,roomid:t.roomid,status:"error",typeList:["status"]})}),3e3)},handleRetry:function(){this.$emit("retry",this.obj)},handleClick:function(){this.$emit("avatarClick",{id:this.name})},handleTouch:function(t){console.log(t),this.$emit("flexTouch","@".concat(this.name,"，"))}}},vt=ht,gt=(n("23f9"),Object(u["a"])(vt,rt,it,!1,null,"5d4a0a0b",null)),bt=gt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat"},[n("div",{staticClass:"input",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.chatValue,expression:"chatValue"}],attrs:{type:"text"},domProps:{value:t.chatValue},on:{input:function(e){e.target.composing||(t.chatValue=e.target.value)}}})]),n("mu-button",{staticClass:"demo-raised-button",attrs:{color:"primary"},on:{click:t.handleSubmit}},[t._v("发送")])],1)},Ot=[],yt={components:{},data:function(){return{chatValue:""}},computed:{},mounted:function(){},methods:{handleSubmit:function(){this.$emit("sumbit",this.chatValue),this.chatValue=""}}},jt=yt,kt=(n("6e27"),Object(u["a"])(jt,wt,Ot,!1,null,"e95de850",null)),_t=kt.exports;function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ct,Rt={name:"Robot",data:function(){return{hoster:B,hosterImg:T,ishow:!1}},mounted:function(){var t=this;setTimeout((function(){t.ishow=!0}),200)},methods:{goback:function(){this.$router.isBack=!0,this.$router.goBack()},sendmessage:function(t){if(""!==t){var e=this.userid,n={info:t,id:e};this.$store.commit("setRobotMsg",{id:(+new Date).toString(16),msg:t,username:this.hoster,src:this.hosterImg}),this.$store.dispatch("getRobatMess",n)}else nt({content:"内容不能为空"})}},computed:It(It({},Object(P["b"])(["getRobotMsg"])),Object(P["c"])({userid:function(t){return t.userInfo.userid},src:function(t){return t.userInfo.src}})),components:{Message:bt,InputSumbit:_t}},Et=Rt,Pt=(n("1338"),Object(u["a"])(Et,Z,tt,!1,null,"e94f3b4e",null)),St=Pt.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("UserHead",{attrs:{src:t.src,username:t.username}}),n("div",{staticClass:"content"},[n("mu-list",[n("mu-list-item",{attrs:{button:"",ripple:!0},on:{click:t.changeAvatar}},[n("mu-list-item-action",[n("mu-icon",{attrs:{value:"send"}})],1),n("mu-list-item-title",[t._v("修改头像")])],1),n("mu-list-item",{attrs:{button:"",ripple:!0},on:{click:t.rmLocalData}},[n("mu-list-item-action",[n("mu-icon",{attrs:{value:"drafts"}})],1),n("mu-list-item-title",[t._v("清除缓存")])],1),n("mu-list-item",{attrs:{button:""},on:{click:t.checkNotice}},[n("mu-list-item-action",[n("mu-icon",{attrs:{value:"email"}})],1),n("mu-list-item-title",[t._v("检查通知")])],1)],1)],1),n("div",{staticClass:"logout"},[n("mu-button",{staticClass:"demo-raised-button",attrs:{"full-width":"",color:"error"},on:{click:t.logout}},[t._v("退出")])],1),n("div",{staticStyle:{height:"80px"}}),n("Bottom")],1)},Lt=[],Dt=(n("c5f6"),n("87f3"),"webchat_app"),Ut=window.localStorage;function Mt(){try{Ct?Ut.setItem(Dt,JSON.stringify(Ct)):Ct=JSON.parse(Ut.getItem(Dt)||"{}")}catch(t){console.log(t)}}function Nt(t){return Object.hasOwnProperty.call(Ct,t)}function Vt(t){if(!Nt(t))return!1;var e=Ct[t]||{},n=e.value,r=e.duration,i=e.time;return Date.now()-i<=r?n:(Bt(t),!1)}function Tt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;Ct[t]={value:e,duration:n,time:Date.now()},Mt()}function Bt(t){Nt(t)&&(delete Ct[t],Mt())}function At(){Ct={},Mt()}Mt();var Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-header"},[n("div",{staticClass:"head"},[n("img",{attrs:{src:t.src,alt:""}})]),n("div",{staticClass:"name"},[t._v("\n    "+t._s(t.username)+"\n  ")]),n("div",{staticClass:"background"},[n("img",{attrs:{src:t.src,alt:""}})])])},zt=[],Gt={components:{},props:["src","username"],data:function(){return{}},computed:{},mounted:function(){},methods:{}},Ft=Gt,qt=(n("cf9a"),Object(u["a"])(Ft,Ht,zt,!1,null,null,null)),Wt=qt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},Xt=[],Yt={name:"mixins-login",components:{},props:{},data:function(){return{}},methods:{isLogin:function(){return!this.$store.state.userInfo.token}},mounted:function(){}},Kt=Yt,Qt=Object(u["a"])(Kt,Jt,Xt,!1,null,null,null),Zt=Qt.exports;function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ne={name:"Home",mixins:[Zt],data:function(){return{}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isLogin()){t.next=8;break}return t.next=3,g({title:"提示",content:"需要登录后才能查看哦~",ok:"去登录",cancel:"返回首页"});case 3:if(e=t.sent,"submit"!==e){t.next=7;break}return this.$router.push("/login"),t.abrupt("return");case 7:this.$router.push("/");case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{checkNotice:function(){"Notification"in window?"granted"===Notification.permission?nt({content:"您已开启通知"}):"denied"!==Notification.permission?(console.log("获取权限"),Notification.requestPermission((function(t){nt("granted"===t?{content:"开启权限成功"}:{content:"开启权限拒绝"})}))):console.log(Notification.permission):nt({content:"您的浏览器暂不支持该功能"})},changeAvatar:function(){this.$router.push("/avatar")},rmLocalData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g({title:"提示",content:"清除缓存会导致更新历史再再次提醒，确定清除？"});case 2:e=t.sent,"submit"===e&&Bt("update-20180916");case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g({title:"提示",content:"你忍心离开吗？"});case 2:e=t.sent,"submit"===e&&(q.emit("roomout"),At(),this.$store.commit("setUserInfo",{}),this.$store.commit("setUnread",{room1:0,room2:0}),this.$router.push("/"));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleGithub:function(){nt({content:"https://github.com/hua1995116/webchat"})},handleTips:function(){nt({title:"请我喝杯奶茶",html:'<div><img style="width: 200px" src="//s3.qiufengh.com/money/WechatIMG64.jpeg" /></div>'})}},computed:ee({},Object(P["c"])({username:function(t){return t.userInfo.userid},userid:function(t){return t.userInfo.id},src:function(t){return t.userInfo.src}})),components:{Bottom:k,UserHead:Wt}},re=ne,ie=(n("bb9d"),Object(u["a"])(re,$t,Lt,!1,null,"cdb99798",null)),oe=ie.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("SignTemplate",{attrs:{type:"register"}})},se=[],ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"content"},[n("form",{attrs:{action:"",name:"form2"}},[t._m(0),n("Input",{attrs:{type:"text",placeholder:"输入账号"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("br"),n("Input",{attrs:{type:"password",placeholder:"输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("br"),n("div",{staticClass:"box box2",on:{click:t.submit}},[n("Arrow")],1)],1),n("div",{staticClass:"bottom-wraper"},[n("mu-flex",{attrs:{"align-items":"center"}},[n("mu-flex",{attrs:{"justify-content":"center",fill:""}},[n("router-link",{attrs:{to:{name:"login"===t.type?"Register":"Login"}}},[n("div",{staticClass:"tip-user"},[t._v(t._s("login"===t.type?"注册帐号":"去登录"))])])],1),n("mu-flex",{attrs:{"justify-content":"center"}},[t._v("|")]),n("mu-flex",{attrs:{"justify-content":"center",fill:""}},[n("div",{staticClass:"tip-user"},[t._v("忘记密码")])])],1),n("div",{staticClass:"bottom-arguemnt"},[t._v("\n        登录即可代表同意协议\n      ")]),t._m(1)],1)])])},ue=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"context-logo"},[n("img",{attrs:{src:"https://s3.qiufengh.com/webchat/webchat-logo-160.png",alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticStyle:{"text-align":"center"}},[n("a",{attrs:{href:"http://beian.miit.gov.cn",target:"_blank"}},[t._v("浙ICP备16040413号-1")])])}],le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{version:"1.1",id:"my-svg",width:"960px",height:"560px",viewBox:"0 0 350 50","enable-background":"new 0 0 960 50","xml:space":"preserve"}},[n("path",{attrs:{fill:"none","data-duration":"10",stroke:"#2196f3","stroke-width":"4",d:"M0,14.203h13.835L19.82,37.71l7.575-23.507h12.93l7.896,23.566l6.021-23.566h13.75L54.238,51.539H41.505l-7.562-22.465\n      l-7.309,22.465H13.843L0,14.203z"}}),n("path",{attrs:{fill:"none","data-duration":"10",stroke:"#2196f3","stroke-width":"4",d:"M112.781,36.422H84.093c0.258,2.297,0.879,4.008,1.863,5.133c1.383,1.617,3.187,2.426,5.414,2.426\n      c1.406,0,2.742-0.352,4.008-1.055c0.773-0.445,1.605-1.23,2.496-2.355l14.098,1.301c-2.157,3.75-4.758,6.439-7.805,8.068\n      s-7.418,2.443-13.113,2.443c-4.945,0-8.836-0.698-11.672-2.092s-5.186-3.609-7.049-6.645c-1.863-3.035-2.795-6.604-2.795-10.705\n      c0-5.836,1.869-10.559,5.607-14.168c3.738-3.609,8.9-5.414,15.486-5.414c5.344,0,9.562,0.809,12.656,2.426\n      c3.094,1.617,5.449,3.961,7.066,7.031c1.617,3.071,2.426,7.066,2.426,11.988v1.618H112.781z M98.226,29.566\n      c-0.281-2.765-1.025-4.746-2.232-5.941c-1.208-1.195-2.795-1.793-4.764-1.793c-2.273,0-4.09,0.902-5.449,2.707\n      c-0.867,1.125-1.418,2.801-1.652,5.027H98.226z"}}),n("path",{attrs:{fill:"none","data-duration":"10",stroke:"#2196f3","stroke-width":"4",d:"M118.722,0h14.449v17.859c1.429-1.5,3.053-2.625,4.869-3.375s3.826-1.125,6.029-1.125c4.547,0,8.309,1.635,11.285,4.904\n      c2.976,3.27,4.465,7.963,4.465,14.08c0,4.078-0.68,7.67-2.039,10.775c-1.359,3.106-3.24,5.426-5.643,6.961\n      c-2.403,1.535-5.068,2.303-7.999,2.303c-2.508,0-4.805-0.54-6.891-1.617c-1.57-0.844-3.282-2.426-5.133-4.746v5.52H118.72V0H118.722\n      z M133.066,32.766c0,3.211,0.603,5.537,1.811,6.979c1.207,1.441,2.736,2.162,4.588,2.162c1.71,0,3.146-0.708,4.307-2.127\n      c1.16-1.418,1.74-3.802,1.74-7.154c0-2.953-0.568-5.121-1.705-6.504c-1.137-1.383-2.514-2.074-4.131-2.074\n      c-1.946,0-3.533,0.721-4.764,2.162C133.681,27.651,133.066,29.836,133.066,32.766z"}}),n("path",{attrs:{fill:"none","data-duration":"10",stroke:"#2196f3","stroke-width":"4",d:"M194.519,36.914l13.604,1.547c-0.75,2.836-1.98,5.291-3.69,7.365c-1.711,2.074-3.897,3.686-6.558,4.834\n      c-2.659,1.148-6.042,1.723-10.143,1.723c-3.961,0-7.26-0.369-9.896-1.106c-2.637-0.737-4.904-1.931-6.804-3.583\n      c-1.897-1.651-3.387-3.588-4.465-5.813c-1.078-2.225-1.617-5.175-1.617-8.852c0-3.84,0.656-7.037,1.969-9.589\n      c0.962-1.873,2.273-3.553,3.938-5.04c1.664-1.487,3.375-2.593,5.133-3.319c2.789-1.147,6.363-1.721,10.723-1.721\n      c6.095,0,10.74,1.09,13.939,3.27c3.199,2.18,5.443,5.367,6.732,9.562l-13.466,1.793c-0.422-1.594-1.189-2.795-2.303-3.604\n      c-1.113-0.809-2.606-1.213-4.481-1.213c-2.368,0-4.284,0.848-5.748,2.544c-1.465,1.696-2.197,4.264-2.197,7.703\n      c0,3.065,0.726,5.393,2.18,6.983c1.453,1.591,3.306,2.386,5.556,2.386c1.875,0,3.45-0.48,4.729-1.441\n      C192.931,40.383,193.886,38.906,194.519,36.914z"}}),n("path",{attrs:{fill:"none","data-duration":"10",stroke:"#2196f3","stroke-width":"4",d:"M213.468,0h14.309v18.984c1.945-2.016,3.879-3.457,5.801-4.324c1.922-0.867,4.195-1.301,6.82-1.301\n      c3.891,0,6.955,1.184,9.193,3.551c2.237,2.368,3.356,6,3.356,10.898v23.731h-14.379V31.008c0-2.343-0.434-4.002-1.301-4.975\n      c-0.867-0.972-2.086-1.459-3.656-1.459c-1.734,0-3.141,0.656-4.219,1.969s-1.617,3.668-1.617,7.066v17.93h-14.309L213.468,0\n      L213.468,0z"}}),n("path",{attrs:{fill:"none","data-duration":"10",stroke:"#2196f3","stroke-width":"4",d:"M274.535,26.297l-13.676-1.442c0.516-2.391,1.26-4.271,2.232-5.643c0.972-1.372,2.373-2.561,4.2-3.568\n      c1.312-0.726,3.117-1.289,5.414-1.688c2.297-0.398,4.781-0.598,7.453-0.598c4.289,0,7.734,0.241,10.336,0.721\n      c2.603,0.48,4.771,1.482,6.504,3.006c1.22,1.055,2.181,2.549,2.884,4.482c0.702,1.933,1.055,3.779,1.055,5.537v16.488\n      c0,1.758,0.111,3.135,0.334,4.131c0.223,0.997,0.709,2.268,1.459,3.814H289.3c-0.539-0.961-0.892-1.693-1.056-2.197\n      c-0.164-0.504-0.328-1.295-0.492-2.373c-1.875,1.805-3.737,3.094-5.59,3.867c-2.53,1.031-5.473,1.547-8.823,1.547\n      c-4.453,0-7.834-1.031-10.144-3.094c-2.309-2.062-3.463-4.605-3.463-7.629c0-2.835,0.832-5.168,2.496-6.996s4.733-3.187,9.211-4.078\n      c5.367-1.078,8.848-1.833,10.44-2.268c1.595-0.434,3.281-1.002,5.062-1.705c0-1.758-0.363-2.988-1.09-3.691\n      c-0.728-0.703-2.004-1.055-3.832-1.055c-2.344,0-4.103,0.375-5.273,1.125C275.835,23.578,275.097,24.68,274.535,26.297z\n        M286.945,33.82c-1.969,0.703-4.02,1.324-6.152,1.863c-2.905,0.773-4.745,1.535-5.52,2.285c-0.797,0.773-1.195,1.652-1.195,2.637\n      c0,1.125,0.394,2.045,1.178,2.76c0.785,0.715,1.939,1.072,3.464,1.072c1.594,0,3.075-0.387,4.446-1.16\n      c1.371-0.773,2.345-1.717,2.918-2.83c0.574-1.113,0.861-2.561,0.861-4.342V33.82L286.945,33.82z"}}),n("path",{attrs:{fill:"none","data-duration":"10",stroke:"#2196f3","stroke-width":"4",d:"M325.546,0v14.203h7.875V24.68h-7.875v13.228c0,1.591,0.152,2.644,0.457,3.157c0.47,0.796,1.289,1.193,2.461,1.193\n      c1.056,0,2.531-0.304,4.431-0.913l1.055,9.877c-3.539,0.773-6.844,1.16-9.914,1.16c-3.562,0-6.188-0.457-7.875-1.37\n      c-1.688-0.913-2.936-2.299-3.744-4.16s-1.213-4.875-1.213-9.042V24.678h-5.272V14.201h5.272V7.346L325.546,0z"}})])},me=[],de=(n("b5e8"),n("3b75")),pe=n.n(de),fe={components:{},data:function(){return{timer:null}},mounted:function(){var t=new pe.a("my-svg");this.timer=setInterval((function(){t.stop().reset().play(2)}),5e3)},computed:{},methods:{clear:function(){clearInterval(this.timer)}}},he=fe,ve=Object(u["a"])(he,le,me,!1,null,"f503b802",null),ge=ve.exports,be=(n("97ba"),window.document.body);function we(t){var e=document.createElement("div"),n=document.createElement("div");return be.appendChild(e),e.appendChild(n),t=t||{},new Promise((function(r){return new i["a"]({el:n,data:{content:t.content||"",timeout:t.timeout||1500,background:t.background||"rgba(0, 0, 0, 0.7)",color:t.color||"#fff",toast:!1},methods:{close:function(){be.removeChild(e),r(this)}},mounted:function(){var t=this;setTimeout((function(){t.toast=!0}),this.timeout),setTimeout((function(){t.close()}),this.timeout+1e3)},template:'\n      <div class="wind-toast" :class="{\'opacity0\': toast}">\n        <div class="wind-toast-content" :style="{\'background-color\': background, \'color\': color}">\n          {{content}}\n        </div>\n      </div>\n    '})}))}var Oe=function(){var t=navigator.userAgent,e=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n="input";function r(t){setTimeout((function(){if("INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName){var t="pc";/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?t="ios":/(Android)/i.test(navigator.userAgent)&&(t="android"),"ios"===t&&document.activeElement.scrollIntoViewIfNeeded(!0)}}),100)}[].forEach.call(document.querySelectorAll(n),(function(t){t.addEventListener("blur",(function(t){e&&r()}))}))},ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"icon",attrs:{t:"1559060684823",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2772","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"36"}},[n("path",{attrs:{d:"M853.6 580.8h-722c-37.8 0-68.4-30.6-68.4-68.4S93.8 444 131.6 444h722c37.8 0 68.4 30.6 68.4 68.4s-30.6 68.4-68.4 68.4z",fill:"#ffffff"}}),n("path",{attrs:{d:"M600.2 902.1c-16.3 0-32.7-5.8-45.8-17.6-28.1-25.3-30.3-68.5-5-96.6l248.3-275.5L549.4 237c-25.3-28.1-23-71.3 5-96.6 28.1-25.3 71.3-23 96.6 5l289.5 321.3c23.4 26 23.4 65.5 0 91.5L651 879.5c-13.5 15-32.1 22.6-50.8 22.6z",fill:"#ffffff"}})])},je=[],ke={components:{},data:function(){return{}},computed:{},mounted:function(){},methods:{}},_e=ke,xe=Object(u["a"])(_e,ye,je,!1,null,null,null),Ie=xe.exports,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-input-outer"},[n("input",t._b({ref:"input",staticClass:"chat-input",attrs:{type:t.type},domProps:{value:t.initValue},on:{input:t.handleInput}},"input",t.$attrs,!1)),n("mu-icon",{directives:[{name:"show",rawName:"v-show",value:t.cancel,expression:"cancel"}],staticClass:"chat-cancel",attrs:{size:"24",value:"cancel"},on:{click:t.handleReset}})],1)},Re=[],Ee={props:["value","type"],components:{},data:function(){return{initValue:this.value,cancel:!1}},computed:{},mounted:function(){},methods:{handleReset:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear"),this.initValue="",this.cancel=!1},handleInput:function(t){t.target.value?this.cancel=!0:this.cancel=!1,this.initValue=t.target.value,this.$emit("input",t.target.value)}}},Pe=Ee,Se=(n("325c"),Object(u["a"])(Pe,Ce,Re,!1,null,"0b79d9a6",null)),$e=Se.exports,Le=n("6ee6"),De=n("75fc"),Ue=n("7338"),Me=n.n(Ue),Ne="",Ve=Me.a.create();Ve.defaults.timeout=3e4,Ve.interceptors.request.use(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url&&"/"===e.url.charAt(0)&&(e.url="".concat(Ne).concat(e.url)),e.headers.authorization="Bearer ".concat(Vt("token")),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return Promise.reject(t)})),Ve.interceptors.response.use((function(t){return 200===t.status?t:Promise.reject(t)}),(function(t){if(t){var e="";if(t.response&&401===t.response.status)return void(e=t.response.data.msg);e="网络异常，请检查你的网络。",we({content:e,timeout:2e3,background:"#f44336"})}else we({content:"未知错误。",timeout:2e3,background:"#f44336"});return Promise.reject(t)}));var Te=Ve,Be={loginUser:function(t){return Te.post("/api/user/signin",t)},RegisterUser:function(t){return Te.post("/api/user/signup",t)},getRoomHistory:function(t){return Te.get("/api/message/history/byUser",{params:t})},RoomHistoryAll:function(t){return Te.get("/api/message/v2/history",{params:t})},getHostUserList:function(t){return Te.get("/api/message/getHot",{params:t})},getvipuser:function(t){return Te.get("/api/user/vipuser",{params:t})},getSearch:function(t){return Te.get("/api/user/search",{params:t})},getRobotMessage:function(t){return Te.get("/api/message/robotapi",{params:t})},postUploadFile:function(t){return Te.post("/api/file/uploadimg",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},postUploadAvatar:function(t){return Te.post("/api/file/avatar",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getUserInfo:function(t){return Te.get("/api/user/getInfo",{params:t})},postAddFriend:function(t){return Te.post("/api/friend/add",t)},postListFriend:function(t){return Te.post("/api/friend/list",t)},getNotice:function(){return Te.get("https://s3.qiufengh.com/config/notice-config.js")}},Ae=Be,He=n("995c"),ze=n.n(He),Ge=n("2442"),Fe=n.n(Ge);function qe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function We(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qe(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}i["a"].use(P["a"]);var Je=new P["a"].Store({state:{userInfo:{src:Vt("src"),userid:Vt("userid"),id:Vt("id"),token:Vt("token")},lookUserInfo:{},friendList:[],isDiscount:!1,isLogin:!1,roomdetail:{},roomUsers:{},robotmsg:[{id:1,username:M,src:U,msg:"如果微信群过期了,添加作者微信(添加时记得备注:项目交流)"},{id:2,username:M,src:U,img:"https://s3.qiufengh.com/webchat/webcaht-my.jpeg"},{id:3,username:M,src:U,msg:"期待你的加入"},{id:4,username:M,src:U,img:"https://s3.qiufengh.com/webchat/webchat-group.jpeg"},{id:5,username:M,src:U,msg:"如果还有什么想知道的可以问我"}],unRead:{room1:0,room2:0},hotUserList:[],vipUserList:[],searchUserList:[],svgmodal:null,emojiShow:!1,theme:"#2196f3"},getters:{getInfos:function(t){return t.roomdetail.infos},getRobotMsg:function(t){return t.robotmsg},getEmoji:function(t){return t.emojiShow}},mutations:{setDiscount:function(t,e){t.isDiscount=e},setUnread:function(t,e){for(var n in e)t.unRead[n]=+e[n]},setLoginState:function(t,e){t.isLogin=e},setUserInfo:function(t,e){var n=e.type,r=e.value;if(r)Tt(n,r),t.userInfo[n]=r;else{var i=Object.keys(e);0==i.length?Object.keys(t.userInfo).map((function(e){t.userInfo[e]="",Tt(e,"")})):i.map((function(n){t.userInfo[n]=e[n],Tt(n,e[n])}))}},setEmoji:function(t,e){t.emojiShow=e},setSvgModal:function(t,e){t.svgmodal=e},delRoomDetailImg:function(t,e){var n=e.roomid,r=e.clientId,i=Fe()(t.roomdetail[n],{clientId:r});t.roomdetail[n].splice(i,i+1)},setRoomDetailStatus:function(t,e){var n=e.roomid,r=(e.status,e.clientId),i=e.typeList,o=e.newClientId,a=ze()(t.roomdetail[n],{clientId:r});i.map((function(t){a[t]=e[t]})),o&&(a.clientId=o)},setRoomDetailInfosAfter:function(t,e){var n,r=e.roomid,i=e.msgs;t.roomdetail[r]||(t.roomdetail[r]=[]),(n=t.roomdetail[r]).push.apply(n,Object(De["a"])(i))},setRoomDetailInfosBeforeNoRefresh:function(t,e){var n=e.data,r=e.roomid,i=t.roomdetail[r]||[],o=n.concat(i);t.roomdetail[r]=o},setRoomDetailInfosBefore:function(t,e){var n=e.data,r=e.roomid,i=t.roomdetail[r]||[],o=n.concat(i);t.roomdetail=We(We({},t.roomdetail),{},Object(h["a"])({},r,o))},setRoomDetailInfos:function(t,e){var n=e.data;e.roomid;t.roomdetail.infos=n},setUsers:function(t,e){var n=e.roomid,r=e.onlineUsers,i=r;t.roomUsers=We(We({},t.roomUsers),{},Object(h["a"])({},n,i))},setRobotMsg:function(t,e){t.robotmsg.push(e)},setLookUserInfo:function(t,e){t.lookUserInfo=e},setFriendList:function(t,e){t.friendList=e},sethotUserList:function(t,e){t.hotUserList=e},setvipUserList:function(t,e){t.vipUserList=e},setSearchList:function(t,e){t.searchUserList=e},setAllmsg:function(t,e){t.roomdetail=e}},actions:{getSearch:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,r=e.commit,t.next=3,Ae.getSearch(n);case 3:i=t.sent,0===i.data.errno&&r("setSearchList",i.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),getvipuser:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,r=e.commit,t.next=3,Ae.getvipuser(n);case 3:i=t.sent,0===i.data.errno&&r("setvipUserList",i.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),getHostUserList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,r=e.commit,t.next=3,Ae.getHostUserList(n);case 3:i=t.sent,0===i.data.errno&&r("sethotUserList",i.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),addFriend:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(Le["a"])(e),t.next=3,Ae.postAddFriend(n);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),uploadAvatar:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(Le["a"])(e),t.next=3,Ae.postUploadAvatar(n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),uploadImg:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(Le["a"])(e),t.prev=1,t.next=4,Ae.postUploadFile(n);case 4:if(r=t.sent,!r){t.next=11;break}if(0!==r.data.errno){t.next=10;break}return t.abrupt("return",{data:r.data.data,code:0});case 10:return t.abrupt("return",{data:r.data.data,code:500});case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t["catch"](1),t.abrupt("return",{data:"服务端异常,重新发送",code:500});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));function e(e,n){return t.apply(this,arguments)}return e}(),registerSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(Le["a"])(e),t.next=3,Ae.RegisterUser(n);case 3:if(r=t.sent,0!==r.data.errno){t.next=6;break}return t.abrupt("return",{status:"success",data:r.data});case 6:return t.abrupt("return",{status:"fail",data:r.data});case 7:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),loginSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(Le["a"])(e),t.next=3,Ae.loginUser(n);case 3:if(r=t.sent,0!==r.data.errno){t.next=6;break}return t.abrupt("return",{status:"success",data:r.data});case 6:return t.abrupt("return",{status:"fail",data:r.data});case 7:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),getUserInfo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,r=e.commit,t.next=3,Ae.getUserInfo(n);case 3:i=t.sent,0===i.data.errno&&r("setLookUserInfo",i.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),postListFriend:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,r=e.commit,t.next=3,Ae.postListFriend(n);case 3:i=t.sent,0===i.data.errno&&r("setFriendList",i.data.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),getRoomHistory:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,r=e.commit,t.next=3,Ae.getRoomHistory(n);case 3:i=t.sent,0===i.data.errno&&(o=i.data.data,o&&r("setAllmsg",o));case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),getAllMessHistory:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state,r=e.commit,t.prev=1,t.next=4,Ae.RoomHistoryAll(n);case 4:if(i=t.sent,0!==i.data.errno){t.next=9;break}return o=i.data.data,n.msgid?r("setRoomDetailInfosBeforeNoRefresh",{data:o.data,roomid:n.roomid}):r("setRoomDetailInfosBefore",{data:o.data,roomid:n.roomid}),t.abrupt("return",{data:o.data});case 9:t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](1);case 13:case"end":return t.stop()}}),t,null,[[1,11]])})));function e(e,n){return t.apply(this,arguments)}return e}(),getRobatMess:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,i=M,o=U,t.next=5,Ae.getRobotMessage(n);case 5:a=t.sent,a&&(s=JSON.parse(a.data.data),c="",c=1e5===s.code?s.text:2e5===s.code?s.text+s.url:"暂不支持此类对话",r("setRobotMsg",{msg:c,username:i,src:o}));case 7:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}}),Xe=Je;function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qe(t){return Ze.apply(this,arguments)}function Ze(){return Ze=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.name,r=e.id,i=e.src,e.roomList,q.emit("login",Ke({name:n,id:r},D)),["room1","room2"].forEach((function(t){var e={name:n,src:i,roomid:t};q.emit("room",e)})),t.next=5,Xe.dispatch("getRoomHistory",{selfId:r});case 5:case"end":return t.stop()}}),t)}))),Ze.apply(this,arguments)}var tn={name:"login-template-component",props:["type"],components:{Arrow:Ie,SvgModal:ge,Input:$e},data:function(){return{loading:"",username:"",password:"",visibility:!1}},methods:{submit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.username.trim(),n=this.password.trim(),""===e||""===n){t.next=27;break}if(r={name:e,password:n},"login"!==this.type){t.next=10;break}return t.next=7,this.$store.dispatch("loginSubmit",r);case 7:i=t.sent,t.next=15;break;case 10:return o="//s3.qiufengh.com/avatar/".concat(Math.ceil(272*Math.random()),".jpeg"),r.src=o,t.next=14,this.$store.dispatch("registerSubmit",r);case 14:i=t.sent;case 15:if("success"!==i.status){t.next=24;break}return we({content:i.data.data,timeout:1e3,background:"#2196f3"}),a={userid:i.data.userInfo.name,src:i.data.userInfo.src,id:i.data.userInfo.id,token:i.data.token},this.$store.commit("setUserInfo",a),t.next=21,Qe({name:a.userid,id:a.id,src:a.src,roomList:["room1","room2"]});case 21:this.$router.push({path:"/"}),t.next=25;break;case 24:nt({content:i.data.data});case 25:t.next=28;break;case 27:nt({content:"用户名和密码不能为空"});case 28:this.password="";case 29:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){Oe()},computed:{}},en=tn,nn=(n("0685"),Object(u["a"])(en,ce,ue,!1,null,null,null)),rn=nn.exports,on={name:"Register",components:{SignTemplate:rn},data:function(){return{}},methods:{},mounted:function(){}},an=on,sn=Object(u["a"])(an,ae,se,!1,null,null,null),cn=sn.exports,un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("SignTemplate",{attrs:{type:"login"}})},ln=[],mn={name:"Login",components:{SignTemplate:rn},data:function(){return{}},methods:{},mounted:function(){}},dn=mn,pn=Object(u["a"])(dn,un,ln,!1,null,null,null),fn=pn.exports,hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[n("mu-appbar",{attrs:{color:"primary"}},[n("mu-button",{attrs:{slot:"left",icon:""},on:{click:t.goback},slot:"left"},[n("mu-icon",{attrs:{value:"chevron_left"}})],1),n("div",{staticClass:"center"},[t._v("\n          "+t._s("group"===t.roomType?"聊天("+Object.keys(t.roomUsers[t.roomid]||{}).length+")":t.friendName)+"\n        ")]),"group"===t.roomType?n("mu-button",{attrs:{slot:"right",icon:""},on:{click:t.openSimpleDialog},slot:"right"},[n("mu-icon",{attrs:{value:"people"}})],1):n("mu-button",{attrs:{slot:"right",icon:""},slot:"right"})],1)],1),n("div",{staticClass:"chat-inner",on:{scroll:t.bindScroll}},[n("div",{staticClass:"chat-container"},[0===(t.roomdetail[t.roomid]||[]).length?n("div",{staticClass:"chat-no-people"},[t._v("暂无消息,赶紧来占个沙发～")]):t._e(),0!==(t.roomdetail[t.roomid]||[]).length&&t.isloading?n("div",{staticClass:"chat-loading"},[t._m(0)]):t._e(),t.isEnd&&0!==(t.roomdetail[t.roomid]||[]).length?n("div",{staticClass:"chat-top"},[t._v("到顶啦~")]):t._e(),t._l(t.roomdetail[t.roomid]||[],(function(e,r){return n("Message",{key:e._id,attrs:{"is-self":e.username===t.username,id:e._id,name:e.username,head:e.src,msg:e.msg,clientId:e.clientId,roomid:e.roomid,img:e.img,loading:e.loading,status:e.status,mytime:e.time,obj:e,container:t.container,isLast:t.roomdetail[t.roomid].length-1===r},on:{avatarClick:t.handleInfo,flexTouch:t.hadnleTouch,retry:t.handleRetry}})})),n("div",{staticClass:"clear"})],2)]),n("div",{staticClass:"bottom"},[n("div",{staticClass:"functions"},[n("div",{staticClass:"fun-li",on:{click:t.imgupload}},[n("i",{staticClass:"icon iconfont icon-camera"})]),n("div",{staticClass:"fun-li emoji"},[n("i",{staticClass:"icon iconfont icon-emoji"}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.getEmoji,expression:"getEmoji"}],staticClass:"emoji-content"},[n("div",{staticClass:"emoji-tabs"},[n("div",{ref:"emoji",staticClass:"emoji-container"},[n("div",{staticClass:"emoji-block",style:{width:48*Math.ceil(t.emoji.people.length/5)+"px"}},t._l(t.emoji.people,(function(e,r){return n("span",{key:r},[t._v(t._s(e))])})),0),n("div",{staticClass:"emoji-block",style:{width:48*Math.ceil(t.emoji.nature.length/5)+"px"}},t._l(t.emoji.nature,(function(e,r){return n("span",{key:r},[t._v(t._s(e))])})),0),n("div",{staticClass:"emoji-block",style:{width:48*Math.ceil(t.emoji.items.length/5)+"px"}},t._l(t.emoji.items,(function(e,r){return n("span",{key:r},[t._v(t._s(e))])})),0),n("div",{staticClass:"emoji-block",style:{width:48*Math.ceil(t.emoji.place.length/5)+"px"}},t._l(t.emoji.place,(function(e,r){return n("span",{key:r},[t._v(t._s(e))])})),0),n("div",{staticClass:"emoji-block",style:{width:48*Math.ceil(t.emoji.single.length/5)+"px"}},t._l(t.emoji.single,(function(e,r){return n("span",{key:r},[t._v(t._s(e))])})),0)]),n("div",{staticClass:"tab"})])])]),n("div",{staticClass:"fun-li",on:{click:t.handleTips}},[n("i",{staticClass:"icon iconfont icon-zanshang"})]),n("div",{staticClass:"fun-li",on:{click:t.handleGithub}},[n("i",{staticClass:"icon iconfont icon-wenti"})])]),n("div",{staticClass:"chat"},[n("div",{staticClass:"input",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submess(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.chatValue,expression:"chatValue"}],attrs:{type:"text"},domProps:{value:t.chatValue},on:{input:function(e){e.target.composing||(t.chatValue=e.target.value)}}})]),n("mu-button",{staticClass:"demo-raised-button",attrs:{color:"primary"},on:{click:t.submess}},[t._v("发送")])],1),n("input",{staticStyle:{display:"none"},attrs:{id:"inputFile",name:"inputFile",type:"file",multiple:"mutiple",accept:"image/gif,image/jpeg,image/png,image/webp,image/jpg;capture=camera"},on:{change:t.fileup}})])])])},vn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lds-css ng-scope"},[n("div",{staticClass:"lds-rolling"},[n("div")])])}],gn={hot:["☀","☁","☔","⛄","⚡","🌀","🌂","🌙","🌟","🍀","🌷","🌱","🍁","🌸","🌹","🍂","🍃","🌺","🌻","🌴","🌵","🌾","🍎","🍊","🍓","👀","👂","👃","👄","👅","💅","👦","👧","👨","👩","👫","👮","👱","👲","👳","👴","👵","👶","👷","👸","👯","👻","👼","👽","👾","👿","💀","💂","💃","🐍","🐎","🐔","🐗","🐫","🐘","🐨","🐒","🐑","🐙","🐚","🐛","🐠","🐡","🐥","🐦","🐧","🐩","🐟","🐬","🐭","🐯","🐱","🐳","🐴","🐵","🐶","🐷","🐻","🐹","🐺","🐮","🐰","🐸","🐾","😠","😩","😲","😞","😵","😰","😒","😍","😤","😜","😝","😋","😘","😚","😷","😳","😃","😆","😁","😂","☺","😄","😢","😭","😨","😣","😡","😌","😖","😔","😱","😪","😏","😓","😥","😫","😉","😺","😸","😹","😽","😻","😿","😼","🙀","🙋","🙌","🙍","🙏","🔥","🎁","🎄","🎅","🎈","🎉","🎍","🎎","🎓","🎏","🎐","🎃","📞","📱","📲","📠","💻","💽","💾","💿","📀","🎵","🎶","🎼","📺","💋","💏","💐","💑","🍔","☕","🍸","🍺","❤","💓","💔","💖","💗","💘","💙","💚","💛","💜","💝","♥","💢","💤","💦","💨","💩","💪","✨","🔔","✊","✋","✌","👊","👍","☝","👆","👇","👈","👉","👋","👏","👌","👎","👐"],people:["😄","😃","😀","😊","☺","😉","😍","😘","😚","😗","😙","😜","😝","😛","😳","😁","😔","😌","😒","😞","😣","😢","😂","😭","😪","😥","😰","😅","😓","😩","😫","😨","😱","😠","😡","😤","😖","😆","😋","😷","😎","😴","😵","😲","😟","😦","😧","😈","👿","😮","😬","😐","😕","😯","😶","😇","😏","😑","👲","👳","👮","👷","💂","👶","👦","👧","👨","👩","👴","👵","👱","👼","👸","😺","😸","😻","😽","😼","🙀","😿","😹","😾","👹","👺","🙈","🙉","🙊","💀","👽","💩","🔥","✨","🌟","💫","💥","💢","💦","💧","💤","💨","👂","👀","👃","👅","👄","👍","👎","👌","👊","✊","✌","👋","✋","👐","👆","👇","👉","👈","🙌","🙏","☝","👏","💪","🚶","🏃","💃","👫","👪","👬","👭","💏","💑","👯","🙆","🙅","💁","🙋","💆","💇","💅","👰","🙎","🙍","🙇","🎩","👑","👒","👟","👞","👡","👠","👢","👕","👔","👚","👗","🎽","👖","👘","👙","💼","👜","👝","👛","👓","🎀","🌂","💄","💛","💙","💜","💚","❤","💔","💗","💓","💕","💖","💞","💘","💌","💋","💍","💎","👤","👥","💬","👣","💭"],nature:["🐶","🐺","🐱","🐭","🐹","🐰","🐸","🐯","🐨","🐻","🐷","🐽","🐮","🐗","🐵","🐒","🐴","🐑","🐘","🐼","🐧","🐦","🐤","🐥","🐣","🐔","🐍","🐢","🐛","🐝","🐜","🐞","🐌","🐙","🐚","🐠","🐟","🐬","🐳","🐋","🐄","🐏","🐀","🐃","🐅","🐇","🐉","🐎","🐐","🐓","🐕","🐖","🐁","🐂","🐲","🐡","🐊","🐫","🐪","🐆","🐈","🐩","🐾","💐","🌸","🌷","🍀","🌹","🌻","🌺","🍁","🍃","🍂","🌿","🌾","🍄","🌵","🌴","🌲","🌳","🌰","🌱","🌼","🌐","🌞","🌝","🌚","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌜","🌛","🌙","🌍","🌎","🌏","🌋","🌌","🌠","⭐","☀","⛅","☁","⚡","☔","❄","⛄","🌀","🌁","🌈","🌊"],items:["🎍","💝","🎎","🎒","🎓","🎏","🎆","🎇","🎐","🎑","🎃","👻","🎅","🎄","🎁","🎋","🎉","🎊","🎈","🎌","🔮","🎥","📷","📹","📼","💿","📀","💽","💾","💻","📱","☎","📞","📟","📠","📡","📺","📻","🔊","🔉","🔈","🔇","🔔","🔕","📢","📣","⏳","⌛","⏰","⌚","🔓","🔒","🔏","🔐","🔑","🔎","💡","🔦","🔆","🔅","🔌","🔋","🔍","🛁","🛀","🚿","🚽","🔧","🔩","🔨","🚪","🚬","💣","🔫","🔪","💊","💉","💰","💴","💵","💷","💶","💳","💸","📲","📧","📥","📤","✉","📩","📨","📯","📫","📪","📬","📭","📮","📦","📝","📄","📃","📑","📊","📈","📉","📜","📋","📅","📆","📇","📁","📂","✂","📌","📎","✒","✏","📏","📐","📕","📗","📘","📙","📓","📔","📒","📚","📖","🔖","📛","🔬","🔭","📰","🎨","🎬","🎤","🎧","🎼","🎵","🎶","🎹","🎻","🎺","🎷","🎸","👾","🎮","🃏","🎴","🀄","🎲","🎯","🏈","🏀","⚽","⚾","🎾","🎱","🏉","🎳","⛳","🚵","🚴","🏁","🏇","🏆","🎿","🏂","🏊","🏄","🎣","☕","🍵","🍶","🍼","🍺","🍻","🍸","🍹","🍷","🍴","🍕","🍔","🍟","🍗","🍖","🍝","🍛","🍤","🍱","🍣","🍥","🍙","🍘","🍚","🍜","🍲","🍢","🍡","🍳","🍞","🍩","🍮","🍦","🍨","🍧","🎂","🍰","🍪","🍫","🍬","🍭","🍯","🍎","🍏","🍊","🍋","🍒","🍇","🍉","🍓","🍑","🍈","🍌","🍐","🍍","🍠","🍆","🍅","🌽"],place:["🏠","🏡","🏫","🏢","🏣","🏥","🏦","🏪","🏩","🏨","💒","⛪","🏬","🏤","🌇","🌆","🏯","🏰","⛺","🏭","🗼","🗾","🗻","🌄","🌅","🌃","🗽","🌉","🎠","🎡","⛲","🎢","🚢","⛵","🚤","🚣","⚓","🚀","✈","💺","🚁","🚂","🚊","🚉","🚞","🚆","🚄","🚅","🚈","🚇","🚝","🚋","🚃","🚎","🚌","🚍","🚙","🚘","🚗","🚕","🚖","🚛","🚚","🚨","🚓","🚔","🚒","🚑","🚐","🚲","🚡","🚟","🚠","🚜","💈","🚏","🎫","🚦","🚥","⚠","🚧","🔰","⛽","🏮","🎰","♨","🗿","🎪","🎭","📍","🚩"],single:["🔟","🔢","🔣","⬆","⬇","⬅","➡","🔠","🔡","🔤","↗","↖","↘","↙","↔","↕","🔄","◀","▶","🔼","🔽","↩","↪","ℹ","⏪","⏩","⏫","⏬","⤵","⤴","🆗","🔀","🔁","🔂","🆕","🆙","🆒","🆓","🆖","📶","🎦","🈁","🈯","🈳","🈵","🈴","🈲","🉐","🈹","🈺","🈶","🈚","🚻","🚹","🚺","🚼","🚾","🚰","🚮","🅿","♿","🚭","🈷","🈸","🈂","Ⓜ","🛂","🛄","🛅","🛃","🉑","㊙","㊗","🆑","🆘","🆔","🚫","🔞","📵","🚯","🚱","🚳","🚷","🚸","⛔","✳","❇","❎","✅","✴","💟","🆚","📳","📴","🅰","🅱","🆎","🅾","💠","➿","♻","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","⛎","🔯","🏧","💹","💲","💱","©","®","™","❌","‼","⁉","❗","❓","❕","❔","⭕","🔝","🔚","🔙","🔛","🔜","🔃","🕛","🕧","🕐","🕜","🕑","🕝","🕒","🕞","🕓","🕟","🕔","🕠","🕕","🕖","🕗","🕘","🕙","🕚","🕡","🕢","🕣","🕤","🕥","🕦","✖","➕","➖","➗","♠","♥","♣","♦","💮","💯","✔","☑","🔘","🔗","➰","〰","〽","🔱","◼","◻","◾","◽","▪","▫","🔺","🔲","🔳","⚫","⚪","🔴","🔵","🔻","⬜","⬛","🔶","🔷","🔸","🔹"]},bn=gn;function wn(t,e){var n=t.split("?")[1],r={};if(n){for(var i=n.split("&"),o=0;o<i.length;o++){var a=i[o].split("=")[0],s=i[o].split("=")[1];r[a]=s}if(Object.hasOwnProperty.call(r,e))return r[e]}return!1}n("3f18");var On=window.document,yn=On.body||On.head,jn=On.createElement("div");jn.classList.add("loader"),jn.innerHTML='<div class="logo">\n                          <div class="white"></div>\n                          <div class="orange"></div>\n                          <div class="red"></div>\n                      </div>';var kn={show:function(t){try{jn.style.opacity=1,Object.keys(t).map((function(e){return jn.style[e]=t[e]})),yn.appendChild(jn)}catch(e){}},hide:function(){try{jn.parentNode===yn&&(jn.style.opacity=0,setTimeout((function(){yn.removeChild(jn)}),200))}catch(t){}}},_n=kn,xn=n("b047"),In=n.n(xn),Cn=(n("5118"),n("11c1"));function Rn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function En(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pn=!1,Sn={name:"Chat",data:function(){var t=Vt("notice")||{},e=t.noticeBar,n=t.noticeVersion;return{isloading:!1,roomid:"",roomType:"group",container:{},chatValue:"",emoji:bn,openSimple:!1,noticeBar:!!e,noticeList:[],noticeVersion:n||"20181222",isEnd:!1,to:"",from:"",friendName:""}},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=wn(window.location.href,"roomId"),n=wn(window.location.href,"type"),r=wn(window.location.href,"to"),i=wn(window.location.href,"from"),o=wn(window.location.href,"friendName"),this.roomid=e,this.roomType=n,this.to=r,this.from=i,this.friendName=o,e||this.$router.push({path:"/"}),this.token||this.$router.push({path:"/login"}),t.next=14,Ae.getNotice();case 14:a=t.sent,this.noticeList=a.data.noticeList,a.data.version!==a.data.version&&(this.noticeBar=!1),this.noticeVersion=a.data.version;case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(_n.show({marginTop:"56px",background:"#f1f5f8"}),Oe(),this.container=document.querySelector(".chat-inner"),this,this.isloading=!0,this.roomdetail[this.roomid]){t.next=8;break}return t.next=8,this.getRoomMessage();case 8:this.isloading=!1,_n.hide(),this.bindEmoji();case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{handleRetry:function(t){if(t.img)nt({content:"图片暂时不支持重新发送"});else{var e=Object(Cn["v4"])();this.$store.commit("setRoomDetailStatus",{clientId:t.clientId,newClientId:e,roomid:t.roomid,status:"loading",typeList:["status"]}),q.emit("message",En(En({},t),{},{clientId:e,status:"loading"}))}},handleInfo:function(t){this.$router.push({path:"/persionDetail",query:{id:t.id}})},hadnleTouch:function(t){this.chatValue=this.chatValue+t},bindScroll:In()(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.target.scrollTop>=0&&e.target.scrollTop<150&&this.handleScroll();case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),30),handleScroll:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Pn||this.isEnd){t.next=7;break}return this.isloading=!0,Pn=!0,t.next=5,this.getRoomMessage();case 5:Pn=!1,this.isloading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),bindEmoji:function(){var t=this;this.$refs.emoji.addEventListener("click",(function(e){var n=e.target||e.srcElement;n&&"span"===n.tagName.toLowerCase()&&(t.chatValue=t.chatValue+n.innerHTML),e.stopPropagation()}))},getRoomMessage:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={roomid:this.roomid},this.roomdetail[this.roomid]&&this.roomdetail[this.roomid].length>0&&(n=this.roomdetail[this.roomid][0]._id,e.msgid=n),t.prev=2,t.next=5,this.$store.dispatch("getAllMessHistory",e);case 5:r=t.sent,r.data.length||(this.isEnd=!0),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](2);case 11:case"end":return t.stop()}}),t,this,[[2,9]])})));function e(){return t.apply(this,arguments)}return e}(),handleNotice:function(){this.noticeBar=!this.noticeBar,Tt("notice",{noticeBar:this.noticeBar,noticeVersion:this.noticeVersion})},openSimpleDialog:function(){this.$router.push({path:"/groupDetail",query:{roomId:this.roomid}})},handleGithub:function(){nt({content:"https://github.com/hua1995116/webchat"})},handleTips:function(){nt({title:"请我喝杯奶茶",html:'<div><img style="width: 150px" src="//s3.qiufengh.com/money/WechatIMG64.jpeg" /><br><img style="width: 150px" src="https://s3.qiufengh.com/webchat/wechat-pay.jpeg"></div>'})},goback:function(){this.$router.isBack=!0,this.$router.goBack()},setLog:function(){},fileup:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,i,o,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,n=document.getElementById("inputFile").files[0],n?(i=new window.FormData,i.append("file",n),o=new window.FileReader,o.onload=function(){var t=new Image;t.src=o.result,t.onload=Object(r["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={username:e.username,src:e.src,img:"".concat(o.result,"?width=").concat(t.width,"&height=").concat(t.height),msg:"",roomType:e.roomType,roomid:e.roomid,type:"img",time:new Date,to:e.to,from:e.from,clientId:Object(Cn["v4"])()},e.$store.commit("setRoomDetailInfosAfter",{roomid:e.roomid,msgs:[En(En({},r),{},{status:"loading",loading:5})]}),n.next=4,e.$store.dispatch("uploadImg",i);case 4:if(a=n.sent,500!=a.code){n.next=9;break}return nt({content:a.data}),e.$store.commit("delRoomDetailImg",{roomid:e.roomid,clientId:r.clientId}),n.abrupt("return");case 9:r.img="".concat(a.data,"?width=").concat(t.width,"&height=").concat(t.height),q.emit("message",r);case 11:case"end":return n.stop()}}),n)})))},o.readAsDataURL(n),this.$nextTick((function(){a.container.scrollTop=1e4}))):console.log("必须有文件");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),imgupload:function(){var t=document.getElementById("inputFile");t.click()},submess:function(){if(""!==this.chatValue){if(this.chatValue.length>200)return void nt({content:"请输入100字以内"});var t=Object(dt["a"])(this.chatValue),e={username:this.username,src:this.src,img:"",msg:t,to:this.to,from:this.from,roomType:this.roomType,roomid:this.roomid,time:new Date,type:"text",clientId:Object(Cn["v4"])()};this.$store.commit("setRoomDetailInfosAfter",{roomid:this.roomid,msgs:[En(En({},e),{},{status:"loading"})]}),q.emit("message",e),this.chatValue=""}else nt({content:"内容不能为空"})}},computed:En(En(En({},Object(P["b"])(["getEmoji"])),Object(P["c"])(["isbind","roomdetail","roomUsers"])),Object(P["c"])({token:function(t){return t.userInfo.token},username:function(t){return t.userInfo.userid},userid:function(t){return t.userInfo.id},src:function(t){return t.userInfo.src}})),components:{Message:bt}},$n=Sn,Ln=(n("dab9"),Object(u["a"])($n,hn,vn,!1,null,"3fe00b56",null)),Dn=Ln.exports,Un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{leftIcon:"chevron_left",rightIcon:"",content:"修改头像",color:""},on:{leftClick:t.goback}}),n("div",{staticClass:"wrapper"},[n("vue-cropper",{ref:"cropper",attrs:{fixed:t.option.fixed,img:t.option.img,outputSize:t.option.size,outputType:t.option.outputType,info:t.option.info,canMoveBox:t.option.canMoveBox,autoCrop:t.option.autoCrop}})],1),n("div",{staticClass:"tools"},[n("label",{staticClass:"btn",attrs:{for:"uploads"}},[t._v("上传头像")]),n("input",{staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(e){return t.uploadImg(e,1)}}}),n("button",{staticClass:"btn",on:{click:t.handleSubmit}},[t._v("保存头像")])])],1)},Mn=[],Nn=n("7618"),Vn=n("7e79"),Tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[n("mu-appbar",{attrs:{color:t.color}},[n("mu-button",{attrs:{slot:"left",icon:""},on:{click:t.leftClick},slot:"left"},[n("mu-icon",{attrs:{value:t.leftIcon}})],1),n("div",{staticClass:"center"},[t._v("\n          "+t._s(t.content)+"\n        ")]),n("mu-button",{attrs:{slot:"right",icon:""},on:{click:t.rightClick},slot:"right"},[n("mu-icon",{attrs:{value:t.rightIcon}})],1)],1)],1)])},Bn=[],An={props:["content","leftIcon","rightIcon","color"],components:{},data:function(){return{}},computed:{},mounted:function(){},methods:{leftClick:function(){this.$emit("leftClick")},rightClick:function(){this.$emit("rightClick")}}},Hn=An,zn=(n("44e8"),Object(u["a"])(Hn,Tn,Bn,!1,null,"37776a73",null)),Gn=zn.exports;function Fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fn(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wn={name:"Avatar",components:{VueCropper:Vn["VueCropper"],Header:Gn},data:function(){return{option:{img:Vt("src"),size:1,info:!0,outputType:"png",canMoveBox:!0,fixed:!0,autoCrop:!0}}},mounted:function(){},methods:{goback:function(){this.$router.isBack=!0,this.$router.goBack()},postAvatar:function(){var t=this;_n.show(),this.$refs.cropper.getCropBlob(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(n){var r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new window.File([n],t.name,{type:t.type}),i=new window.FormData,i.append("file",r),i.append("username",Vt("userid")),e.next=6,t.$store.dispatch("uploadAvatar",i);case 6:if(o=e.sent,_n.hide(),0!==o.errno){e.next=15;break}return t.$store.commit("setUserInfo",{type:"src",value:o.data.url}),e.next=12,nt({content:"上传成功"});case 12:t.$router.push("/home"),e.next=16;break;case 15:nt({content:"上传失败"});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleSubmit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g({title:"提示",content:"确定上传头像吗?"});case 2:e=t.sent,"submit"===e&&this.postAvatar();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),uploadImg:function(t,e){var n=this,r=t.target.files[0];if(console.log(r),!/\.(jpg|jpeg|png|webp|GIF|JPG|PNG)$/.test(t.target.value))return nt({content:"图片类型必须是jpeg,jpg,png中的一种!"}),!1;if(r.size>3145728)return nt({content:"图片大小必须小于3M!"}),!1;this.name=r.name,this.type=r.type;var i=new FileReader;i.onload=function(t){var r;r="object"===Object(Nn["a"])(t.target.result)?window.URL.createObjectURL(new Blob([t.target.result])):t.target.result,1===e&&(n.option.img=r)},i.readAsArrayBuffer(r)}},computed:qn({},Object(P["c"])({userid:function(t){return t.userInfo.userid},src:function(t){return t.userInfo.src}}))},Jn=Wn,Xn=(n("9c39"),Object(u["a"])(Jn,Un,Mn,!1,null,"24a63dbe",null)),Yn=Xn.exports,Kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{leftIcon:"chevron_left",rightIcon:"",content:"聊天信息",color:""},on:{leftClick:t.goback}}),n("div",{staticClass:"all-chat"},[n("div",{staticClass:"group-avatar group-list"},[t._l(Object.keys(t.roomUsers[t.roomid]||{}).slice(0,18),(function(e,r){return n("Avatar",{key:r,staticClass:"list-avatar",attrs:{src:t.roomUsers[t.roomid][e].src}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.allUser).length>18,expression:"Object.keys(allUser).length > 18"}],staticClass:"group-more",on:{click:t.gotoMore}},[t._v("查看更多群成员")])],2),n("div",{staticClass:"group-list"},[n("mu-list",[n("mu-sub-header",[t._v("声音开启设置")]),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.events=!t.events}}},[n("mu-list-item-title",[t._v("\n            事件和提醒\n          ")]),n("mu-list-item-action",[n("mu-switch",{attrs:{readonly:""},model:{value:t.events,callback:function(e){t.events=e},expression:"events"}})],1)],1),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.calls=!t.calls}}},[n("mu-list-item-title",[t._v("\n            电话\n          ")]),n("mu-list-item-action",[n("mu-switch",{attrs:{readonly:""},model:{value:t.calls,callback:function(e){t.calls=e},expression:"calls"}})],1)],1),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.messages=!t.messages}}},[n("mu-list-item-title",[t._v("\n            信息\n          ")]),n("mu-list-item-action",[n("mu-switch",{attrs:{readonly:""},model:{value:t.messages,callback:function(e){t.messages=e},expression:"messages"}})],1)],1)],1)],1),n("div",{staticClass:"group-list"},[n("mu-list",[n("mu-sub-header",[t._v("通知设置")]),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.notifications=!t.notifications}}},[n("mu-list-item-action",[n("mu-checkbox",{attrs:{readonly:""},model:{value:t.notifications,callback:function(e){t.notifications=e},expression:"notifications"}})],1),n("mu-list-item-title",[t._v("\n            通知\n          ")])],1),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.sounds=!t.sounds}}},[n("mu-list-item-action",[n("mu-checkbox",{attrs:{readonly:""},model:{value:t.sounds,callback:function(e){t.sounds=e},expression:"sounds"}})],1),n("mu-list-item-title",[t._v("\n            声音\n          ")])],1),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.videoSounds=!t.videoSounds}}},[n("mu-list-item-action",[n("mu-checkbox",{attrs:{readonly:""},model:{value:t.videoSounds,callback:function(e){t.videoSounds=e},expression:"videoSounds"}})],1),n("mu-list-item-title",[t._v("\n            视频的声音\n          ")])],1)],1)],1)])],1)},Qn=[];function Zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zn(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var er={name:"GroupDetail",components:{Header:Gn,Avatar:E},data:function(){return{events:!1,calls:!1,messages:!1,notifications:!1,sounds:!1,videoSounds:!1,roomid:"",allUser:{"005":{src:"static/files/825836avatar-hua1995116.jpeg"}}}},computed:tr({},Object(P["c"])(["roomUsers"])),mounted:function(){var t=wn(window.location.href,"roomId");this.roomid=t},methods:{goback:function(){this.$router.isBack=!0,this.$router.goBack()},gotoMore:function(){this.$router.push({path:"/groupMember",query:{roomId:this.roomid}})}}},nr=er,rr=(n("20f1"),Object(u["a"])(nr,Kn,Qn,!1,null,"2f37ec26",null)),ir=rr.exports,or=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{leftIcon:"chevron_left",rightIcon:"",content:"个人信息",color:""},on:{leftClick:t.goback}}),n("div",{staticClass:"all-chat"},[n("UserHead",{attrs:{src:t.lookUserInfo.src,username:t.lookUserInfo.name}}),n("div",{staticClass:"group-list"},[n("mu-list",[n("mu-sub-header",[t._v("信息")]),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.events=!t.events}}},[n("mu-list-item-title",[t._v("\n            注册时间\n          ")]),n("mu-list-item-action",{staticClass:"group-info-detail"},[t._v("\n            2019-10-23\n          ")])],1),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.calls=!t.calls}}},[n("mu-list-item-title",[t._v("\n            电话\n          ")]),n("mu-list-item-action",[t._v("\n            12393213312\n          ")])],1),n("mu-list-item",{attrs:{button:"",ripple:!1},on:{click:function(e){t.messages=!t.messages}}},[n("mu-list-item-title",[t._v("\n            性别\n          ")]),n("mu-list-item-action",[n("Gender",{attrs:{sex:""}})],1)],1)],1)],1),n("mu-row",{staticClass:"user-tools",attrs:{gutter:""}},[n("mu-col",{attrs:{span:"6"}},[n("mu-button",{staticClass:"op",on:{click:t.letchat}},[t._v("发起聊天")])],1),n("mu-col",{attrs:{span:"6"}},[n("mu-button",{staticClass:"op",attrs:{color:"primary"},on:{click:t.handelAddFriend}},[t._v("添加好友")])],1)],1)],1)],1)},ar=[],sr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{staticClass:"icon iconfont",class:["nan"===t.sex?"icon-nan":"nv"===t.sex?"icon-nv":"icon-weizhi"]})},cr=[],ur={props:["sex"]},lr=ur,mr=(n("988c"),Object(u["a"])(lr,sr,cr,!1,null,null,null)),dr=mr.exports;function pr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pr(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var hr={name:"PersonDetail",components:{Header:Gn,Avatar:E,UserHead:Wt,Gender:dr},data:function(){return{events:!1,calls:!1,messages:!1,notifications:!1,sounds:!1,videoSounds:!1}},computed:fr({},Object(P["c"])(["lookUserInfo","userInfo"])),mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=wn(window.location.href,"id"),t.next=3,this.$store.dispatch("getUserInfo",{id:e});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{letchat:function(){nt({content:"尽情期待"})},handelAddFriend:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("addFriend",{selfId:this.userInfo.id,friendId:this.lookUserInfo.id});case 2:e=t.sent,0===e.data.errno?(console.log("1111"),nt({content:e.data.data})):nt({content:e.data.data});case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goback:function(){this.$router.isBack=!0,this.$router.goBack()},gotoMore:function(){this.$router.push({path:"/groupMember"})}}},vr=hr,gr=(n("c89a"),Object(u["a"])(vr,or,ar,!1,null,"54254504",null)),br=gr.exports,wr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header",{attrs:{leftIcon:"chevron_left",rightIcon:"",content:"所有成员",color:""},on:{leftClick:t.goback}}),n("div",{staticClass:"all-chat"},[n("div",{staticClass:"group-avatar"},t._l(t.roomUsers[t.roomid],(function(t,e){return n("Avatar",{key:e,staticClass:"list-avatar",attrs:{src:t.src}})})),1)])],1)},Or=[];function yr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yr(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kr={name:"GroupMember",components:{Header:Gn,Avatar:E},data:function(){return{roomid:""}},computed:jr({},Object(P["c"])(["roomUsers"])),mounted:function(){var t=wn(window.location.href,"roomId");this.roomid=t},methods:{goback:function(){this.$router.isBack=!0,this.$router.goBack()}}},_r=kr,xr=(n("548f"),Object(u["a"])(_r,wr,Or,!1,null,"7e639357",null)),Ir=xr.exports,Cr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("SearchBar",{attrs:{disabled:"true"},on:{submit:t.handleSearch}}),n("div",[n("mu-sub-header",[t._v("vvvvip")]),t._l(t.vipUserList,(function(e){return n("mu-chip",{key:e._id,staticClass:"list-chip vip-chip",attrs:{color:"#282b2d"},on:{click:function(n){return t.lookInfo({_id:e.name})}}},[n("mu-avatar",{attrs:{size:32}},[n("img",{attrs:{src:e.src}})]),n("img",{staticClass:"vip-img",attrs:{src:"https://s3.qiufengh.com/webchat/vvvip.png"}}),t._v("\n      "+t._s(e.name>10?e.name.slice(0,10)+"...":e.name)+"\n    ")],1)})),n("mu-sub-header",[t._v("热门用户")]),t._l(t.mapHotList,(function(e){return n("mu-chip",{key:e._id,staticClass:"list-chip",attrs:{color:e.color},on:{click:function(n){return t.lookInfo(e)}}},[n("mu-avatar",{attrs:{size:32}},[n("img",{attrs:{src:e.user.src}})]),t._v("\n      "+t._s(e._id.length>10?e._id.slice(0,10)+"...":e._id)+"\n    ")],1)}))],2),n("div",{staticStyle:{height:"80px"}}),n("Bottom")],1)},Rr=[],Er=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-container"},[t.disabled?n("div",{staticClass:"search-bar",on:{click:t.search}},[t._v("快来搜索朋友吧")]):n("input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"search-bar",attrs:{type:"text",placeholder:"快来搜索朋友吧"},on:{input:t.change}}),t.disabled?n("mu-icon",{staticClass:"search-icon",attrs:{size:"32",value:"search"},on:{click:t.search}}):n("span",{staticClass:"search-text",on:{click:t.cancel}},[t._v("取消")])],1)},Pr=[],Sr={components:{},props:["disabled","timeout"],data:function(){return{}},computed:{},mounted:function(){},methods:{search:function(){this.$emit("submit")},change:In()((function(t){this.$emit("change",t.target.value)}),500),cancel:function(){this.$emit("cancel")}}},$r=Sr,Lr=(n("54df"),Object(u["a"])($r,Er,Pr,!1,null,null,null)),Dr=Lr.exports;function Ur(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ur(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Nr=n("fd9b"),Vr={name:"Search",data:function(){return{}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("getHostUserList");case 2:return t.next=4,this.$store.dispatch("getvipuser");case 4:console.log(this.vipUserList);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{changeAvatar:function(){this.$router.push("/avatar")},lookInfo:function(t){this.$router.push({path:"/persionDetail",query:{id:t._id}})},handleSearch:function(){this.$router.push("/searchResult")}},computed:Mr(Mr({},Object(P["c"])(["hotUserList","userInfo","vipUserList"])),{},{mapHotList:function(){return this.hotUserList.map((function(t){return Mr(Mr({},t),{},{color:Nr()})}))}}),components:{Bottom:k,UserHead:Wt,SearchBar:Dr}},Tr=Vr,Br=(n("3447"),Object(u["a"])(Tr,Cr,Rr,!1,null,"57edc584",null)),Ar=Br.exports,Hr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("SearchBar",{on:{change:t.change,cancel:t.cancel}}),n("mu-list",[0===t.searchUserList.length?n("mu-sub-header",[t._v("暂无查询结果")]):t._e(),t._l(t.searchUserList,(function(e){return n("mu-list-item",{key:e._id,attrs:{avatar:"",button:"",ripple:!1},on:{click:function(n){return t.lookInfo(e)}}},[n("mu-list-item-action",[n("mu-avatar",[n("img",{attrs:{src:e.src}})])],1),n("mu-list-item-title",[t._v(t._s(e.name))]),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"chat_bubble"}})],1)],1)}))],2)],1)},zr=[];function Gr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gr(Object(n),!0).forEach((function(e){Object(h["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qr={name:"SearchResult",components:{SearchBar:Dr},data:function(){return{}},computed:Fr({},Object(P["c"])(["searchUserList"])),mounted:function(){},methods:{change:function(t){console.log(t),this.$store.dispatch("getSearch",{name:t})},cancel:function(){console.log("cancel"),this.$router.isBack=!0,this.$router.goBack()},lookInfo:function(t){this.$router.push({path:"/persionDetail",query:{id:t.name}})}}},Wr=qr,Jr=Object(u["a"])(Wr,Hr,zr,!1,null,"52c5f10d",null),Xr=Jr.exports,Yr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"webview"},[n("transition",{attrs:{name:t.transitionName}},[n("router-view",{staticClass:"child-view"})],1)],1)},Kr=[],Qr={name:"BaseTransition",data:function(){return{transitionName:"slide-left"}},beforeRouteUpdate:function(t,e,n){var r=this.$router.isBack;this.transitionName=r?"slide-right":"slide-left",this.$router.isBack=!1,n()}},Zr=Qr,ti=(n("6adc"),Object(u["a"])(Zr,Yr,Kr,!1,null,null,null)),ei=ti.exports,ni=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"webview"},[n("transition",{attrs:{name:t.transitionName}},[n("router-view",{staticClass:"child-view"})],1)],1)},ri=[],ii={data:function(){return{transitionName:"slide-top"}},beforeRouteUpdate:function(t,e,n){var r=this.$router.isBack;this.transitionName=r?"slide-bottom":"slide-top",this.$router.isBack=!1,n()}},oi=ii,ai=(n("84f1"),Object(u["a"])(oi,ni,ri,!1,null,null,null)),si=ai.exports,ci=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},ui=[],li={name:"BaseView",data:function(){return{}}},mi=li,di=Object(u["a"])(mi,ci,ui,!1,null,"a46397bc",null),pi=di.exports;d["a"].prototype.goBack=function(){this.isBack=!0,window.history.go(-1)},i["a"].use(d["a"]);var fi=new d["a"]({routes:[{path:"/",name:"BaseTransition",component:ei,children:[{path:"",name:"index",component:Q},{path:"/chat",name:"chat",component:Dn},{path:"/robot",name:"Robot",component:St},{path:"/groupDetail",name:"GroupDetail",component:ir},{path:"/groupMember",name:"GroupMember",component:Ir},{path:"/persionDetail",name:"PersonDetail",component:br}]},{path:"/home",name:"HomeBaseTransition",component:pi,children:[{path:"",name:"Home",component:ei,children:[{path:"/avatar",name:"avatar",component:Yn},{path:"",name:"Home",component:oe}]}]},{path:"/search",name:"SearchBase",component:pi,children:[{path:"",name:"Seach",component:si,children:[{path:"",name:"Search",component:Ar},{path:"/searchResult",name:"SearchResult",component:Xr}]}]},{path:"/register",name:"Register",component:cn},{path:"/login",name:"Login",component:fn}]});fi.beforeEach((function(t,e,n){_n.show(),n()})),fi.afterEach((function(t){_n.hide()}));var hi=fi,vi=(n("5a8b"),n("bcc3f"),n("30f4"));n("d6f6"),n("2583");n("7514");var gi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.preview.show,expression:"preview.show"}],staticClass:"lg-preview-wrapper",on:{click:t.leave,touchmove:function(t){t.preventDefault()}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.preview.loading,expression:"preview.loading"}],staticClass:"lg-preview-loading"},[n("div")]),t.preview.current.src?n("img",{directives:[{name:"show",rawName:"v-show",value:!t.preview.loading,expression:"!preview.loading"}],staticClass:"lg-preview-img",attrs:{src:t.preview.current.src,alt:t.preview.current.title}}):t._e(),t.preview.isTitleEnable&&t.preview.current.title?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.preview.loading,expression:"!preview.loading"}],staticClass:"lg-preview-title"},[t._v("\n            "+t._s(t.preview.current.title)+"\n        ")]):t._e(),t.preview.isHorizontalNavEnable?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.preview.loading,expression:"!preview.loading"}],staticClass:"lg-preview-nav-left"},[n("span",{staticClass:"lg-preview-nav-arrow",on:{click:t.preAction}})]):t._e(),t.preview.isHorizontalNavEnable?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.preview.loading,expression:"!preview.loading"}],staticClass:"lg-preview-nav-right"},[n("span",{staticClass:"lg-preview-nav-arrow",on:{click:t.nextAction}})]):t._e()])])},bi=[],wi={name:"Preview",computed:{preview:function(){return window.LOGIC_EVENT_BUS.LOGIC_PREVIEW}},methods:{leave:function(t){this.preview.show&&0!==t.target.className.indexOf("lg-preview-nav-arrow")&&this.close()},close:function(){this.preview.show=!1},preAction:function(){this.preview.loading=!0;var t=this.preview.list.indexOf(this.preview.current);if(0!==t){t--,this.preview.current=this.preview.list[t];var e=new window.Image;e.src=this.preview.current.src,e.onload=function(){setTimeout((function(){window.LOGIC_EVENT_BUS.LOGIC_PREVIEW.loading=!1}),500)}}else this.preview.loading=!1},nextAction:function(){this.preview.loading=!0;var t=this.preview.list.indexOf(this.preview.current);if(t!==this.preview.list.length-1){t++,this.preview.current=this.preview.list[t];var e=new window.Image;e.src=this.preview.current.src,e.onload=function(){setTimeout((function(){window.LOGIC_EVENT_BUS.LOGIC_PREVIEW.loading=!1}),500)}}else this.preview.loading=!1}}},Oi=wi,yi=(n("c4bc"),Object(u["a"])(Oi,gi,bi,!1,null,"29566a88",null)),ji=yi.exports,ki={install:function(t,e){var n=new t({data:function(){return{LOGIC_PREVIEW:{isTitleEnable:!0,isHorizontalNavEnable:!0,show:!1,loading:!0,current:{title:"",src:""},list:[]}}}});window.LOGIC_EVENT_BUS=n,t.component("lg-preview",ji);var r=function(t){t.forEach((function(t,e){t.index=e+1}))};function i(t,e){return new Promise((function(r,i){var o=new window.Image;o.src=t,o.onload=function(){e["naturalHeight"]=o.naturalHeight,e["naturalWidth"]=o.naturalWidth,setTimeout((function(){n.LOGIC_PREVIEW.loading=!1}),500),r(o)},o.error=function(t){i(t)}}))}t.directive("preview",{bind:function(t){var e={title:"",el:t,index:0,src:""};n.LOGIC_PREVIEW.list.push(e),r(n.LOGIC_PREVIEW.list),t.addEventListener("click",(function(r){r.stopPropagation(),n.LOGIC_PREVIEW.isTitleEnable=t.getAttribute("preview-title-enable"),n.LOGIC_PREVIEW.isHorizontalNavEnable=t.getAttribute("preview-nav-enable"),n.LOGIC_PREVIEW.show=!0,n.LOGIC_PREVIEW.loading=!0,n.LOGIC_PREVIEW.current=e,i(e.src,e)}))},update:function(t,e){var r=n.LOGIC_PREVIEW.list.find((function(e){return e.el===t}));r&&(r.src=e.value,r.title=t.alt)},unbind:function(t){t&&n.LOGIC_PREVIEW.list.forEach((function(e,r){t===e.el&&n.LOGIC_PREVIEW.list.splice(r,1)})),r(n.LOGIC_PREVIEW.list)}})}},_i={install:function(t,e){t.directive("imgSize",{bind:function(t,e){var n=new window.Image;n.src=e.value,n.onload=function(){t.src=e.value,"last"===t.getAttribute("data-item")&&(console.log("scrollIntoView"),t.scrollIntoView())},n.error=function(t){reject(t)}},update:function(t,e){},unbind:function(t){}})}},xi=n("e101");i["a"].directive("focus",{inserted:function(t){t.focus()}}),i["a"].use(ki),i["a"].use(_i),i["a"].use(xi["a"],{timeout:900,preventDefault:!1}),i["a"].use(vi["a"]),i["a"].config.productionTip=!1;var Ii=window.Notification,Ci=function(t){if("granted"===Ii.permission){var e="";e=""!==t.img?"[图片]":t.msg;var n=new Ii("【".concat(t.roomid,"】 提示"),{body:e,icon:t.src});n.onclick=function(){n.close()}}};q.on("reconnect",function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("reconnect"),we({content:"又可以愉快地上网啦",timeout:2e3,background:"#f44336"});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),q.on("connect",Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("connect"),wn(window.location.href,"roomId"),e=Xe.state.userInfo.userid,n=Xe.state.userInfo.src,r=Xe.state.userInfo.id,!r){t.next=8;break}return t.next=8,Qe({socket:q,store:Xe,name:e,id:r,src:n,env:D,roomList:["room1","room2"]});case 8:case"end":return t.stop()}}),t)})))),q.on("disconnect",(function(){console.log("disconnect"),we({content:"抱歉网络开了小差",timeout:2e3,background:"#f44336"}),Xe.commit("setDiscount",!0)})),q.on("message",(function(t){var e=Xe.state.userInfo.userid,n=t.roomid,r=t.username,i=t.img;e===r?i?(console.log("img",t),Xe.commit("setRoomDetailStatus",{clientId:t.clientId,roomid:t.roomid,status:"finish",loading:100,img:t.img,typeList:["status","loading","img"]})):Xe.commit("setRoomDetailStatus",{clientId:t.clientId,roomid:t.roomid,status:"finish",typeList:["status"]}):(Xe.commit("setRoomDetailInfosAfter",{roomid:n,msgs:[t]}),"granted"===Ii.permission&&Ci(t))})),q.on("count",(function(t){console.log(t),Xe.commit("setUnread",t)})),q.on("room",(function(t){console.log(t),Xe.commit("setUsers",t)})),q.on("roomout",(function(t){console.log(t),Xe.commit("setUsers",t)})),q.on("friend",(function(t){Xe.commit("setFriendList",t)})),document.addEventListener("touchstart",(function(t){t.target.className&&(t.target.className.indexOf("emoji")>-1||t.target.parentNode.className.indexOf("emoji")>-1?Xe.commit("setEmoji",!0):Xe.commit("setEmoji",!1))})),document.addEventListener("click",(function(t){t.target.className.indexOf("emoji")>-1||t.target.parentNode.className.indexOf("emoji")>-1?Xe.commit("setEmoji",!0):Xe.commit("setEmoji",!1)})),new i["a"]({el:"#app",router:hi,store:Xe,template:"<App/>",components:{App:m}})},"5a8b":function(t,e,n){},6094:function(t,e,n){"use strict";var r=n("065b"),i=n.n(r);i.a},"6a14":function(t,e,n){},"6adc":function(t,e,n){"use strict";var r=n("cbfb"),i=n.n(r);i.a},"6cb7":function(t,e,n){"use strict";var r=n("5113"),i=n.n(r);i.a},"6e27":function(t,e,n){"use strict";var r=n("dc3e"),i=n.n(r);i.a},"757a":function(t,e,n){},"757c":function(t,e,n){},"84f1":function(t,e,n){"use strict";var r=n("3f70"),i=n.n(r);i.a},"859d":function(t,e,n){"use strict";var r=n("b369"),i=n.n(r);i.a},"86fa":function(t,e,n){},"8c34":function(t,e,n){},"8d7e":function(t,e,n){},"97ba":function(t,e,n){},"988c":function(t,e,n){"use strict";var r=n("c716"),i=n.n(r);i.a},"9c39":function(t,e,n){"use strict";var r=n("ad00"),i=n.n(r);i.a},"9d34":function(t,e,n){},ad00:function(t,e,n){},b12e:function(t,e,n){},b250:function(t,e,n){},b369:function(t,e,n){},b5e8:function(t,e,n){},b8c0:function(t,e,n){},bb9d:function(t,e,n){"use strict";var r=n("757a"),i=n.n(r);i.a},bcc3f:function(t,e,n){},c1c4:function(t,e,n){"use strict";var r=n("e4f9"),i=n.n(r);i.a},c4bc:function(t,e,n){"use strict";var r=n("b12e"),i=n.n(r);i.a},c716:function(t,e,n){},c89a:function(t,e,n){"use strict";var r=n("86fa"),i=n.n(r);i.a},cbfb:function(t,e,n){},cf9a:function(t,e,n){"use strict";var r=n("757c"),i=n.n(r);i.a},dab9:function(t,e,n){"use strict";var r=n("0eb0"),i=n.n(r);i.a},dc3e:function(t,e,n){},e4f9:function(t,e,n){},e936:function(t,e,n){"use strict";var r=n("0361"),i=n.n(r);i.a},f644:function(t,e,n){}});
//# sourceMappingURL=app.5bf430ab.js.map